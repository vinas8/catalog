<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-fullscreen">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Serpent Town - Your Snake Adventure</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#4a7c59">
</head>
<body>
    <div id="app" class="pixel-art">
        <!-- Title Screen - Stardew Valley style -->
        <div id="screen-title" class="screen active">
            <div class="title-content">
                <h1>ğŸ Serpent Town</h1>
                <p class="subtitle">A cozy snake breeding adventure</p>
                <button id="btn-start" class="btn-primary">New Game</button>
                <button id="btn-continue" class="btn-secondary" style="display:none">Continue</button>
            </div>
        </div>

        <!-- Town Map - Top-down Stardew Valley style -->
        <div id="screen-town" class="screen">
            <!-- Status Bar -->
            <div class="status-bar">
                <div class="status-item">
                    <span class="status-icon">ğŸ’°</span>
                    <span id="status-gold">0</span>
                </div>
                <div class="status-item">
                    <span class="status-icon">ğŸ</span>
                    <span id="status-snakes">0</span>
                </div>
            </div>

            <div class="town-map">
                <h2 style="text-align: center; color: white; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); padding: 3rem 0 1rem 0; font-size: 2.5rem;">ğŸ˜ï¸ Serpent Town</h2>
                <div class="town-grid">
                    <!-- Shop (unlocked) -->
                    <div class="building" data-module="shop">
                        <div class="building-icon">ğŸª</div>
                        <div class="building-name">Snake Shop</div>
                        <div class="building-desc">Buy snakes with real money</div>
                    </div>

                    <!-- Snake Dex (unlocked - PokÃ©dex style!) -->
                    <div class="building" data-module="dex">
                        <div class="building-icon">ğŸ“–</div>
                        <div class="building-name">Snake Dex</div>
                        <div class="building-desc">Encyclopedia of all snakes</div>
                    </div>

                    <!-- Collection (locked until first purchase) -->
                    <div class="building locked" data-module="collection">
                        <div class="building-icon">ğŸ’</div>
                        <div class="building-name">My Collection</div>
                        <div class="building-desc">View your snakes</div>
                    </div>

                    <!-- Game/Care (locked until first snake) -->
                    <div class="building locked" data-module="game">
                        <div class="building-icon">ğŸ®</div>
                        <div class="building-name">Care Station</div>
                        <div class="building-desc">Feed & care for snakes</div>
                    </div>

                    <!-- Calculator (locked) -->
                    <div class="building locked" data-module="calculator">
                        <div class="building-icon">ğŸ§®</div>
                        <div class="building-name">Genetics Calculator</div>
                        <div class="building-desc">Predict breeding outcomes</div>
                    </div>

                    <!-- Breeding (locked) -->
                    <div class="building locked" data-module="breeding">
                        <div class="building-icon">ğŸ§¬</div>
                        <div class="building-name">Breeding Center</div>
                        <div class="building-desc">Breed snakes for morphs</div>
                    </div>

                    <!-- Farm (locked) -->
                    <div class="building locked" data-module="farm">
                        <div class="building-icon">ğŸŒ¾</div>
                        <div class="building-name">Snake Farm</div>
                        <div class="building-desc">Outdoor habitats</div>
                    </div>

                    <!-- Tutorial (always unlocked) -->
                    <div class="building" data-module="tutorial">
                        <div class="building-icon">ğŸ“š</div>
                        <div class="building-name">Tutorial Center</div>
                        <div class="building-desc">Learn the game</div>
                    </div>

                    <!-- Admin (always unlocked) -->
                    <div class="building" data-module="admin">
                        <div class="building-icon">ğŸ”§</div>
                        <div class="building-name">Admin Panel</div>
                        <div class="building-desc">Settings & debug</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tutorial Overlay - PokÃ©mon text box style -->
        <div id="tutorial-overlay" class="overlay" style="display:none">
            <div class="tutorial-box">
                <h3 id="tutorial-title">Tutorial</h3>
                <p id="tutorial-text">Welcome to Serpent Town!</p>
                <button id="btn-tutorial-next" class="btn-primary">Next</button>
                <button id="btn-tutorial-skip" class="btn-secondary">Skip</button>
            </div>
        </div>
    </div>

    <script src="game.js"></script>
    <script>
        // PWA Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/catalog/smri-game/sw.js')
                    .then(reg => console.log('âœ… Service Worker registered'))
                    .catch(err => console.log('âŒ Service Worker failed', err));
            });
        }
    </script>
</body>
</html>
