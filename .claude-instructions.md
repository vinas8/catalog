# Serpent Town - Claude Instructions

## ðŸ”„ Session Start (AUTOMATIC)
When user types `.smri`, **run the startup script**:

```bash
bash scripts/smri-startup.sh
```

**DO NOT manually load files!** The script does everything:
- Checks for CONTEXT-READY flag (fast load < 48h old)
- OR runs full briefing (tree, git, health, docs)
- Automatically detects which mode to use

## ðŸ§  During Session
**Before debugging anything:**
- Check git history: `git log --oneline -20`
- Check session log: `.smri/logs/YYYY-MM-DD.md`
- Reference loaded .smri context (DON'T re-run it!)

**Key principle:** .smri loads ONCE at start, then lives in your memory.

## âš ï¸ CRITICAL RULES
- **NEVER** touch servers (webhook-server.py, upload-server.py)
- **NEVER** start/stop/restart processes
- Check git/logs BEFORE debugging from scratch
- Use `.smri add` to document (waits for approval)
- Deploy worker: `cd worker && bash cloudflare-deploy.sh`

## ðŸ“š Documentation Priority
1. `.smri/INDEX.md` - System rules & navigation (PRIMARY)
2. `.smri/docs/` - Topic docs (business, technical, etc.)
3. `.smri/logs/` - Session history (check for solutions!)
4. `README.md` - Project overview (v0.7.0)
5. `git log` - Code history

## ðŸŽ¯ Quick Commands (User types these)
- `.smri` - Re-run full briefing
- `.smri log` - Append to session log
- `.smri add` - Add documentation
- `.smri list` - Show all SMRI scenarios
- `.smri mcp` - Test MCP integration
- `lol` - Tell a joke first ðŸ˜„

---

**Version:** 0.7.0  
**Tech:** Plain JS, Cloudflare Workers, Stripe, KV  
**Tests:** 68/71 passing (96%)  

See `.smri/INDEX.md` for complete rules.
