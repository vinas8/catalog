# ğŸ Serpent Town - AI Implementation Brief

## Project: Snake Care Tamagotchi + Collectible Card Game + Town RPG

---

## ğŸ¯ CORE CONCEPT

Build a **realistic snake care simulator** that drives real breeding business sales. Players manage a virtual town where they collect snakes (purchased from real Stripe shop), care for them with realistic mechanics, breed morphs using genetics calculator, and engage with community through trading and chat.

---

## ğŸ® GAME FLOW

```
Player â†’ Town Hub â†’ House (Collection View) â†’ Click Snake â†’ Tamagotchi Care Interface
                  â†“
              Shop (Stripe) â†’ Buy Real Snake â†’ Unlock Card â†’ Add to Collection
                  â†“
              Social (Chat, Trading, Friend Visits, Leaderboards)
                  â†“
              NPC Services (Vet when sick, Vacation Care when offline)
```

---

## ğŸ—ï¸ TECHNICAL STACK

- **Frontend**: GitHub Pages (static)
- **Backend**: Cloudflare Worker (API, webhooks, multiplayer)
- **Payments**: Stripe payment links + webhooks
- **Storage**: LocalStorage (Phase 1) â†’ Cloud DB (Phase 3 multiplayer)
- **Framework**: Vanilla JS initially (existing plugin system) â†’ Consider lightweight framework later
- **Assets**: Static PNG images (snake photos from real products)

---

## ğŸ GAME SYSTEMS

### 1. SNAKE CARE (Realistic Simulator Level)

**Core Stats to Track**:
- Hunger (age-dependent feeding schedule, seasonal)
- Hydration (water freshness)
- Temperature (hot spot + cool side, slider control)
- Humidity (breed-specific: 40% vs 60%, affects shedding)
- Health (illness only from neglect/wrong care, no random)
- Weight (growth tracking)
- Shed cycle (visible stages: clear â†’ blue eyes â†’ dull â†’ shed)
- Stress (from over-handling, builds trust over time)

**Care Actions**:
- Feed (choose prey type/size: pinky, fuzzy, adult mouse/rat)
- Refill water
- Adjust temperature (slider)
- Mist for humidity
- Clean enclosure
- Handle (builds trust, too much = stress)
- Health check / Vet visit (costs money, time)

**Life Stages**: Egg â†’ Hatchling â†’ Juvenile â†’ Adult (size affects food/enclosure needs)

### 2. BREEDING SYSTEM (Full Genetics)

**Requirements**:
- Minimum age (2-3 years, species-specific)
- Minimum weight
- Seasonal timing (player chooses season)
- Proper cooling period

**Genetics Calculator**:
- Dominant/recessive traits
- Co-dominant morphs
- Visual outcome predictions
- Line breeding consequences (educational/ethical warnings)
- Possible genetic defects from poor breeding

**Process**: Pair â†’ Cool â†’ Breed â†’ Lay eggs â†’ Incubate (can fast-forward) â†’ Hatch â†’ Keep or sell

### 3. ECONOMY

**Earn Currency**:
- Buy real snake â†’ get bonus in-game points
- Good snake care
- Sell offspring
- Complete quizzes

**Spend Currency**:
- Equipment (heaters, thermostats, auto-feeders)
- Rooms/enclosures (20-50 snakes each)
- Food, substrate, decorations
- Vet visits
- Vacation care service

**Progression**: Loyalty tiers (not XP) â†’ Shop discounts from purchases + good care

### 4. COLLECTION

**Main Game Goal**: Build large, healthy snake collection

- Unlimited snakes (buy rooms to expand)
- Each snake = collectible card with:
  - Species/morph name
  - Photo (real product image)
  - Stats card (care requirements)
  - Current status (health, age, weight)
- Display in house (grid view)
- Click any snake â†’ Tamagotchi care mode

### 5. SOCIAL & MULTIPLAYER

**Features**:
- Chat/forum (community discussion)
- Add friends
- Visit friend collections (read-only)
- Trade offspring, items, equipment
- Leaderboards (collection size, care scores, breeding success)
- Community events (seasonal morphs, challenges like e-commerce promos)

**Offline Mode**: Disable multiplayer/chat, continue local gameplay

**Vacation Mode**: Pay NPC to care for snakes while away (costs in-game currency, time passes)

### 6. EDUCATION

**Tutorial System**:
- Initial setup guide (first snake)
- Contextual tooltips (new features)
- Skippable for experienced users

**Encyclopedia**:
- Species profiles (care requirements)
- Morph genetics guide
- Health issues & treatments
- Breeding guide

**Quizzes**:
- Basic â†’ Advanced progression
- Pass = experience + currency
- Two learning paths:
  1. Generic snake care
  2. Morph breeding/genetics

**Teaching Method**: Show realistic consequences of neglect + provide tips to fix problems

### 7. TIME SYSTEM

- **Real-time** by default (1 day = 1 day)
- **Fast-forward** option (for breeding seasons, incubation)
- **Season selection** (affects breeding, feeding)
- **Vacation mode** (pause with NPC care)

---

## ğŸ¨ UI STRUCTURE

### Town Hub (Main Screen)
```
[ğŸ  Your House]  [ğŸ›’ Shop]
[ğŸ‘¥ Friends]     [ğŸ’¬ Chat]
[ğŸ¥ Vet]         [ğŸ–ï¸ Vacation Care]

Bottom Bar: Collection: 5 snakes | Points: 120
```

### House (Collection View)
```
Room 1 (3/20 snakes)

[Snake Card]  [Snake Card]  [Snake Card]
Name          Name          Name
Health: Good  Health: Shed  Health: Sick

[+ Add Room - 500 pts]
```

### Tamagotchi (Individual Care)
```
ğŸ Super Banana (Ball Python)

[Large Snake Photo/Card]

ğŸ” Hunger:   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  80%
ğŸ’§ Water:    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  100%
ğŸŒ¡ï¸ Temp:     [====|====] 88Â°F (slider)
ğŸ’¦ Humidity: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘  60%
â¤ï¸ Health:   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  80%
ğŸ“ Weight:   450g (Adult)
ğŸ”„ Shed:     Normal (not due)

[Feed] [Water] [Clean] [Handle]
[Breed] [Health Check] [Info]
```

---

## ğŸ“‹ IMPLEMENTATION PHASES

### **PHASE 1: MVP (Immediate Priority)**

**Scope**: Prove concept, get 1 real snake working

**Features**:
1. Town hub (simple navigation buttons)
2. House view (show 1 snake)
3. Tamagotchi interface (1 snake detailed view)
4. Core stats: hunger, water, temp, humidity
5. Basic actions: feed, water, adjust sliders
6. Static PNG snake image
7. Stripe shop (display 1-2 products from products.json)
8. Click "Buy" â†’ Opens Stripe payment link
9. LocalStorage save (save stats every action)
10. Basic tutorial (3-step: buy â†’ care â†’ check stats)

**Tech**:
- Vanilla JS (existing structure)
- Extend current `core.js` and `tamagotchi.js` plugin
- No backend yet (webhook later)
- Simple CSS (current minimal style)

**Data Model** (Phase 1):
```javascript
{
  player: {
    id: "user_email",
    currency: 0,
    loyaltyLevel: 0
  },
  snakes: [
    {
      id: "SB-2024-01",
      name: "Super Banana",
      species: "Ball Python",
      morph: "Super Banana",
      age_days: 365,
      weight_grams: 450,
      life_stage: "adult",
      stats: {
        hunger: 80,      // 0-100
        water: 100,
        temperature: 88, // Fahrenheit
        humidity: 60,    // percentage
        health: 80,
        stress: 20
      },
      shed_cycle: {
        stage: "normal", // normal, pre_shed, in_shed, post_shed
        days_until: 14
      },
      last_fed: timestamp,
      last_watered: timestamp,
      enclosure_id: "room_1"
    }
  ],
  rooms: [
    { id: "room_1", capacity: 20, snakes: ["SB-2024-01"] }
  ]
}
```

**Success Criteria**:
- Can buy snake via Stripe (manual unlock for now)
- Can view snake in house
- Can care for snake (feed, water, adjust temp/humidity)
- Stats decay over time (hunger drops, water drops)
- Save/load works (refresh page = data persists)

---

### **PHASE 2: Collection & Breeding Basics**

**Add**:
- Multiple snakes
- Buy rooms (expand collection)
- Basic breeding (pair snakes, get eggs, wait, hatch)
- Health system (snake gets sick if stats too low)
- Shedding cycle (visual indicator)
- Equipment shop (improve care efficiency)
- Inventory system

**Tech**: Consider lightweight framework for complexity

---

### **PHASE 3: Social & Advanced**

**Add**:
- Cloudflare Worker backend (user accounts, chat, trading)
- Full genetics calculator
- Quarantine mechanic (new snakes)
- Vet diagnosis system
- Vacation mode (NPC care)
- Leaderboards
- Community events

**Tech**: WebSocket for real-time chat, database for multiplayer state

---

### **PHASE 4: Polish**

**Add**:
- Animations
- Audio (optional)
- Mobile PWA/native app
- Analytics
- Localization
- Performance optimization

---

## ğŸ² GAME DESIGN PRINCIPLES

1. **Realistic but accessible** - Accurate snake care, but not tedious
2. **Educational through gameplay** - Learn by doing + consequences
3. **Collection-driven** - Main motivation is growing collection
4. **Business-integrated** - Real purchases = collectibles (not pay-to-win)
5. **Community-focused** - Social features enhance engagement
6. **Ethical breeding** - Teach responsible practices
7. **Time-respectful** - Quick daily care + optional deep engagement

---

## ğŸš¨ CRITICAL CONSTRAINTS

**Do NOT include**:
- Random mechanics (illness, genetics) - always consequence-based
- Pay-to-win (can't buy better stats)
- Tedious micromanagement (automation available)
- External links (all content in-game)
- Audio/animations in Phase 1 (later only)

**DO include**:
- Every stat/mechanic serves education
- Clear cause â†’ effect (neglect â†’ sick)
- Save every action (no progress loss)
- Mobile-optimized from start
- Accessibility where possible

---

## ğŸ“Š SUCCESS METRICS

**Business**: Conversion to real purchases (primary)
**Engagement**: Daily active users, session time, retention
**Education**: Quiz completion, care improvement over time
**Social**: Chat activity, trades, friend connections

---

## ğŸ”— INTEGRATION POINTS

**Stripe**:
- products.json â†’ Display in shop
- Payment link â†’ Opens in new tab
- Webhook (Phase 2+) â†’ Auto-unlock snake in game

**Cloudflare Worker** (Phase 3):
- `/api/user` - Get/update user data
- `/api/snakes` - CRUD operations
- `/api/trade` - Trading system
- `/api/chat` - Multiplayer chat
- `/webhook/stripe` - Payment processing

---

## ğŸ¯ MVP ACCEPTANCE CRITERIA (Phase 1)

User can:
1. âœ… Open game â†’ See town hub
2. âœ… Click house â†’ See snake collection (empty or 1 snake)
3. âœ… Click shop â†’ See 2 real snakes from products.json
4. âœ… Click buy â†’ Open Stripe link (actual payment)
5. âœ… (After purchase) Manually unlock snake in game
6. âœ… Click snake â†’ See Tamagotchi care interface
7. âœ… Feed snake â†’ Hunger stat increases
8. âœ… Wait time â†’ Hunger stat decreases
9. âœ… Adjust temperature slider â†’ Temp changes
10. âœ… Refresh page â†’ All data persists

**Timeline**: 1-2 weeks for Phase 1 MVP

---

## ğŸ“¦ DELIVERABLES (Phase 1)

**Code**:
- Extended `src/core.js` (state management, decay logic)
- New `src/town.js` (hub navigation)
- New `src/house.js` (collection view)
- Enhanced `src/plugins/tamagotchi.js` (detailed care UI)
- Updated `index.html` (new layout)

**Assets**:
- Snake PNGs (from data/products.json img paths)
- Simple icons (ğŸğŸ”ğŸ’§ğŸŒ¡ï¸ğŸ’¦ emoji OK for MVP)

**Data**:
- `data/products.json` (already exists)
- Save format in LocalStorage

**Documentation**:
- README.md (already complete)
- Code comments (key functions only)

---

## ğŸš€ START HERE (Implementation Order)

1. **Review existing code** (`src/core.js`, `src/plugins/tamagotchi.js`)
2. **Design state machine** (how stats decay over time)
3. **Build town hub** (simple button navigation)
4. **Build house view** (display snake cards from save data)
5. **Enhance Tamagotchi UI** (detailed stats + sliders)
6. **Implement stat decay** (setInterval for time-based changes)
7. **Save/load system** (LocalStorage with validation)
8. **Connect to products.json** (shop display)
9. **Test full loop** (buy â†’ unlock â†’ care â†’ stats change â†’ save â†’ reload)
10. **Polish UI** (responsive, mobile-friendly)

---

**This document is the complete specification for AI implementation. No duplications, no ambiguity. Build Phase 1 MVP following this exactly.**

---

**Status**: Ready for implementation
**Date**: 2025-12-21
**Version**: 1.0 (AI Implementation Brief)
