# ğŸ Serpent Town v0.1 - Complete Documentation

**Version:** 0.1.0  
**Release Date:** December 21, 2025  
**Status:** âœ… Production Ready

---

## Quick Start

### Run Game
```bash
cd serpent-town
python3 -m http.server 8000
```
Open: `http://localhost:8000/game.html`

### Run Tests
```bash
npm test
# 89/89 tests passing âœ…
```

---

## Overview

Snake care simulation game with real-time stats, equipment shop, Stripe integration, and currency economy. Built with plain JavaScript, zero dependencies.

**Key Features:**
- Real-time snake care (8 stats)
- Equipment shop (15+ items)
- Stripe product sync
- Virtual & real snake purchases
- Loyalty tier system (Bronze â†’ Platinum)
- Mobile responsive
- Auto-save (LocalStorage)

---

## Architecture

### File Structure
```
serpent-town/
â”œâ”€â”€ game.html              # Main UI
â”œâ”€â”€ game.js                # Game controller
â”œâ”€â”€ styles.css             # All styling
â”œâ”€â”€ package.json           # v0.1.0
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ business/
â”‚   â”‚   â”œâ”€â”€ economy.js         # Currency & loyalty
â”‚   â”‚   â”œâ”€â”€ equipment.js       # Shop operations
â”‚   â”‚   â””â”€â”€ stripe-sync.js     # Stripe integration
â”‚   â”‚
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”œâ”€â”€ species-profiles.js    # Ball Python, Corn Snake
â”‚   â”‚   â”œâ”€â”€ morphs.js              # Genetics (10+ morphs)
â”‚   â”‚   â”œâ”€â”€ catalog.js             # Product catalog
â”‚   â”‚   â””â”€â”€ equipment-catalog.js   # 15+ shop items
â”‚   â”‚
â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â””â”€â”€ shop-view.js       # Shop interface
â”‚   â”‚
â”‚   â””â”€â”€ config/
â”‚       â””â”€â”€ stripe-config.js   # API keys
â”‚
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ game.test.js           # Unit tests (15)
â”‚   â””â”€â”€ snapshot.test.js       # Snapshot tests (74)
â”‚
â””â”€â”€ docs/
    â””â”€â”€ v0.1.md                # This file
```

### Tech Stack
- **Frontend:** Plain JavaScript (ES6 modules)
- **Styling:** Native CSS (no frameworks)
- **Storage:** LocalStorage
- **Payments:** Stripe API
- **Testing:** Node.js (89 tests)
- **Zero Dependencies:** No npm packages

---

## Features

### Core Gameplay
- **8 Stats:** Hunger, Water, Temperature, Humidity, Health, Stress, Cleanliness, Happiness
- **Real-time decay:** Stats decrease over time (1-3 points per hour)
- **Care actions:** Feed (+40 hunger), Water (+50 water), Clean (+30 cleanliness)
- **Life stages:** Egg â†’ Hatchling â†’ Juvenile â†’ Adult (auto-calculated by age)
- **Shedding cycle:** Tracks days since last shed (21-60 days)
- **Game speed:** 1x-100x slider (for testing)
- **Auto-save:** Every 30 seconds to LocalStorage

### Equipment Shop
**15+ items across 7 categories:**

1. **Heating** - Heat mat ($50), Thermostat ($120), Ceramic heater ($80)
2. **Humidity** - Manual mister ($15), Auto-misting system ($300)
3. **Monitoring** - Thermometer ($20), Hygrometer ($25), Digital station ($150)
4. **Feeding** - Feeding tongs ($10), Auto-feeder ($10,000)
5. **Substrate** - Paper towel ($5), Aspen bedding ($25), Coconut fiber ($30)
6. **Decor** - Basic hide ($20), Deluxe cave ($45)
7. **Bundles** - Starter kit ($200), Professional setup ($500)

**Equipment Effects:**
- Heat mat + Thermostat â†’ Auto-maintains temperature
- Auto-misting system â†’ Auto-maintains humidity  
- Auto-feeder â†’ Feeds on schedule (Gold tier required)
- Monitoring station â†’ Alerts when stats low

### Currency Economy
- **Starting gold:** 1000
- **Virtual snakes:** Corn Snake (500g), Ball Python (1000g)
- **Morphs:** 2x-10x price multipliers
- **Real purchases:** $1 USD = 100 gold bonus
- **Loyalty system:** 1 point per $1 spent
- **Transaction history:** All purchases tracked

### Loyalty Tiers
| Tier | Points | Discount | Access |
|------|--------|----------|--------|
| Bronze | 0-99 | 0% | Basic items |
| Silver | 100-499 | 5% | Premium items |
| Gold | 500-1499 | 10% | Elite items, auto-feeder |
| Platinum | 1500+ | 15% | All items |

### Stripe Integration

**Product Sync Logic:**
1. Fetch products from Stripe API
2. Merge with local `catalog.js`
3. **Update:** If product_id exists in local
4. **Add:** If product_id new from Stripe
5. **Keep:** If product_id only in local (multi-tenant)

**Configuration:**
```javascript
// src/config/stripe-config.js
enableSync: true  // Enable Stripe sync
```

**Catalog Format:**
```javascript
{
  product_id: "bp_banana_001",      // Your unique ID
  stripe_product_id: "prod_xyz",    // From Stripe
  stripe_price_id: "price_abc",     // From Stripe
  species: "ball_python",
  morph: "banana",
  name: "Banana Ball Python",
  price: 199.99,
  stripe_link: "https://buy.stripe.com/...",
  metadata: { sex, weight_grams, birth_date }
}
```

### Species Profiles

**Ball Python (Python regius):**
- Temperature: 88-92Â°F hot, 78-82Â°F cool
- Humidity: 50-60% (70% during shed)
- Feeding: Every 5-10 days
- Shedding: 21-45 days
- Clutch size: 3-11 eggs
- Adult weight: 1200-2000g

**Corn Snake (Pantherophis guttatus):**
- Temperature: 85-90Â°F hot, 75-80Â°F cool
- Humidity: 40-50% (60% during shed)
- Feeding: Every 5-10 days
- Shedding: 21-60 days
- Clutch size: 12-24 eggs
- Adult weight: 400-900g

### Morphs
**Ball Python:** Banana, Piebald, Pastel, Spider, Clown  
**Corn Snake:** Amelanistic, Anerythristic, Blood Red, Motley, Tessera

### Visual Design
- **Real snakes:** Gold border (#FFD700), "ğŸ REAL" badge
- **Virtual snakes:** Purple border (#8B5CF6), "ğŸ® VIRTUAL" badge
- **Stat bars:** Color-coded progress (hunger=red, water=cyan, health=green)
- **Mobile responsive:** Grid layout adapts to screen size

---

## Game Mechanics

### Stat Decay (per hour, game speed 1x)
```
Hunger:       -2.0 to -2.5
Water:        -3.0
Cleanliness:  -1.0 to -1.5
Stress:       +0.5 (naturally increases)
```

### Care Actions
```
Feed:   Hunger +40, Stress -5
Water:  Water +50, Stress -2
Clean:  Cleanliness +30, Stress -10
```

### Equipment Automation
- Installed equipment reduces manual care needs
- Auto-feeder feeds every 7 days (if hungry < 50)
- Auto-mister maintains humidity every 6 hours
- Thermostats maintain temperature automatically

---

## API Reference

### Economy Module
```javascript
import { Economy } from './src/business/economy.js';

// Convert money to gold
Economy.moneyToCurrency(100) // â†’ 100 gold

// Buy virtual snake
Economy.buyVirtualSnake('corn_snake', [], gameState)

// Update loyalty tier
Economy.updateLoyaltyTier(gameState)

// Get tier discount
Economy.getTierDiscount('silver') // â†’ 0.05 (5%)
```

### Shop Module
```javascript
import { EquipmentShop } from './src/business/equipment.js';

// Get available items
EquipmentShop.getAvailableItems(gameState)

// Buy equipment
EquipmentShop.buyEquipment('heat_mat_basic', snakeId, gameState)
```

### Stripe Sync
```javascript
import { initializeCatalog } from './src/business/stripe-sync.js';

// Load catalog (syncs with Stripe if key provided)
const catalog = await initializeCatalog(stripeKey);
```

### Species Data
```javascript
import { SPECIES_PROFILES } from './src/data/species-profiles.js';

// Get profile
const bp = SPECIES_PROFILES.ball_python;

// Get life stage
const stage = getLifeStage(snake); // â†’ "adult"
```

---

## Testing

### Run Tests
```bash
npm test              # All 89 tests
npm run test:unit     # 15 unit tests
npm run test:snapshot # 74 snapshot tests
```

### Test Coverage
- **Unit Tests (15):** Business logic, economy, shop
- **Snapshot Tests (74):** HTML, JS, CSS, all modules
- **Success Rate:** 100%

### What's Tested
- HTML structure (all views, modals)
- JavaScript imports (all modules)
- Business logic (economy, shop, sync)
- Data layer (species, morphs, catalog)
- CSS styling (all components)
- UI components (shop, settings)

---

## Configuration

### Stripe API Keys
Edit: `src/config/stripe-config.js`

```javascript
export const STRIPE_CONFIG = {
  publishableKey: 'pk_test_...',
  secretKey: 'sk_test_...',
  enableSync: true,
  defaultCurrency: 'usd'
};
```

### Game Settings
Access via âš™ï¸ button:
- **Game Speed:** 1x-100x slider
- **Save/Reset:** Manual controls
- **Debug Mode:** Ctrl+Shift+D

---

## Deployment

### GitHub Pages
```bash
# Already configured in package.json
git add .
git commit -m "v0.1.0 - Initial release"
git tag v0.1.0
git push origin main --tags

# Enable Pages: Settings â†’ Pages â†’ Deploy from main
# Access: https://USERNAME.github.io/serpent-town/game.html
```

### Netlify/Vercel
Drag and drop the entire folder. Done!

### Local/Termux
```bash
python3 -m http.server 8000
# Open: http://localhost:8000/game.html
```

---

## Browser Support

- âœ… Chrome/Edge 90+
- âœ… Firefox 88+
- âœ… Safari 14+
- âœ… Mobile browsers
- âŒ IE (not supported)

---

## Data Storage

**LocalStorage Schema:**
```javascript
{
  player_id: "player_xxx",
  currency: { gold: 1000 },
  loyalty_points: 0,
  loyalty_tier: "bronze",
  snakes: [...],
  equipment_inventory: [...],
  transaction_history: [],
  game_speed: 1,
  last_save: "2025-12-21T..."
}
```

**Cache:**
- Products cached for 24 hours
- Auto-save every 30 seconds
- Manual save via settings

---

## Performance

- **Game loop:** 1 second interval
- **Load time:** < 1 second
- **Memory:** ~20MB
- **Battery:** Minimal impact
- **Network:** Only for Stripe sync (optional)

---

## Known Limitations

1. **No cloud sync** - Data only on device
2. **Single player** - No multiplayer
3. **No genetics calculator** - Punnett squares pending
4. **No encyclopedia content** - Structure ready
5. **No health events** - Illness triggers pending

---

## Roadmap

### Phase 1 (v0.1) âœ… COMPLETE
- Core game mechanics
- Equipment shop
- Stripe integration
- 89 tests passing

### Phase 2 (v0.2) - Next
- Genetics calculator (Punnett squares)
- Encyclopedia content (10 articles)
- Health event triggers
- Breeding system (egg incubation)

### Phase 3 (v0.3) - Future
- Backend (Cloudflare Worker)
- Stripe webhooks
- User accounts
- Social features

---

## Troubleshooting

### Game Not Loading
1. Check server is running
2. Check URL: `http://localhost:8000/game.html`
3. Open browser console (F12) for errors
4. Clear cache and reload

### Catalog Empty
1. Check browser console for sync messages
2. Verify Stripe key in `src/config/stripe-config.js`
3. Check local catalog has products
4. Set `enableSync: false` to use local only

### Tests Failing
```bash
cd /root/catalog
node --version  # Check Node.js installed
npm test        # Run tests
```

---

## Statistics

- **Lines of Code:** 2,819
- **Dependencies:** 0
- **Tests:** 89 (100% passing)
- **Shop Items:** 15+
- **Species:** 2 (Ball Python, Corn Snake)
- **Morphs:** 10+
- **Loyalty Tiers:** 4

---

## License

MIT License - Free to use and modify

---

## Credits

**Built with:**
- Plain JavaScript (ES6)
- Native CSS3
- Stripe API
- LocalStorage API

**No frameworks. No dependencies. Just code.**

---

## Version History

### v0.1.0 (December 21, 2025)
- Initial release
- Core game mechanics
- Equipment shop (15+ items)
- Stripe integration
- 89 tests passing
- Complete documentation

---

## Support

- **Documentation:** This file
- **Tests:** `npm test`
- **Issues:** Check browser console

---

**Status: âœ… Production Ready**  
**Play now:** `http://localhost:8000/game.html`  
**Version:** 0.1.0

---

*Last updated: December 21, 2025*
