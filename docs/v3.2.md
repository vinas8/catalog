# Serpent Town v3.2 - Complete Documentation

**Version:** 3.2.0  
**Date:** December 21, 2025  
**Status:** ‚úÖ Production Ready

---

## Overview

Snake care simulation game with real-time stats, equipment shop, and currency economy. Built with plain JavaScript, zero dependencies.

**Key Stats:**
- 2,819 lines of code
- 0 dependencies
- 55/55 tests passing (100%)
- 15+ equipment items
- 85% MVP complete

---

## Quick Start

### Run Game
```bash
cd /root/catalog
python3 -m http.server 8000
```
Open: `http://localhost:8000/game.html`

### Run Tests
```bash
npm test
```

### From Termux
```bash
# In proot Ubuntu
cd /root/catalog
python3 -m http.server 8000 --bind 0.0.0.0

# Access on phone: http://localhost:8000/game.html
```

---

## Architecture

### File Structure
```
catalog/
‚îú‚îÄ‚îÄ game.html          # Main UI
‚îú‚îÄ‚îÄ game.js            # Game controller
‚îú‚îÄ‚îÄ styles.css         # Styling
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ business/      # Economy, shop
‚îÇ   ‚îú‚îÄ‚îÄ data/          # Species, morphs, equipment
‚îÇ   ‚îî‚îÄ‚îÄ ui/            # Shop view
‚îî‚îÄ‚îÄ tests/             # 55 tests
```

### Tech Stack
- Plain JavaScript (ES6 modules)
- Native CSS (no frameworks)
- LocalStorage (no backend)
- Zero build process

---

## Features

### Core Gameplay
- **8 Stats:** Hunger, Water, Temperature, Humidity, Health, Stress, Cleanliness, Happiness
- **Real-time decay:** Stats decrease over time (adjustable speed 1x-100x)
- **Care actions:** Feed, Water, Clean buttons
- **Life stages:** Egg ‚Üí Hatchling ‚Üí Juvenile ‚Üí Adult (auto-calculated)
- **Shedding cycle:** Track days since last shed
- **Auto-save:** Every 30 seconds to LocalStorage

### Equipment Shop
- **15+ items** across 7 categories:
  - Heating (heat mat, thermostat, ceramic heater)
  - Humidity (manual mister, auto-misting system)
  - Monitoring (thermometer, hygrometer, digital station)
  - Feeding (tongs, auto-feeder)
  - Substrate (paper towel, aspen, coconut)
  - Decor (basic hide, deluxe cave)
  - Bundles (starter kit, professional setup)

- **Effects:** Automation reduces manual care
- **Loyalty tiers:** Bronze ‚Üí Silver ‚Üí Gold ‚Üí Platinum
- **Discounts:** 0% ‚Üí 15% based on tier

### Economy System
- **Starting gold:** 1000
- **Virtual snakes:** Corn Snake (500g), Ball Python (1000g)
- **Morphs:** 2x-10x price multipliers
- **Real purchases:** $1 USD = 100 gold bonus
- **Loyalty points:** 1 point per $1 spent
- **Transaction history:** All purchases tracked

### Species Profiles

**Ball Python (Python regius):**
- Temperature: 88-92¬∞F hot, 78-82¬∞F cool
- Humidity: 50-60% (70% during shed)
- Feeding: Every 5-10 days
- Shedding: 21-45 days
- Clutch size: 3-11 eggs

**Corn Snake (Pantherophis guttatus):**
- Temperature: 85-90¬∞F hot, 75-80¬∞F cool
- Humidity: 40-50% (60% during shed)
- Feeding: Every 5-10 days
- Shedding: 21-60 days
- Clutch size: 12-24 eggs

### Morphs (10+)
Ball Python: Banana, Piebald, Pastel, Spider, Clown  
Corn Snake: Amelanistic, Anerythristic, Blood Red, Motley, Tessera

---

## Game Mechanics

### Stat Decay (per hour)
- Hunger: -2 to -2.5
- Water: -3
- Cleanliness: -1 to -1.5
- Stress: +0.5 (naturally decreases)

### Equipment Effects
- **Heat Mat + Thermostat:** Auto-maintains temperature
- **Auto Misting System:** Auto-maintains humidity
- **Auto-Feeder:** Feeds on schedule (10,000 gold, Gold tier required)
- **Monitoring Station:** Tracks stats, alerts when low

### Loyalty Tiers
| Tier | Points | Discount | Equipment Access |
|------|--------|----------|------------------|
| Bronze | 0-99 | 0% | Basic items |
| Silver | 100-499 | 5% | + Premium items |
| Gold | 500-1499 | 10% | + Elite items, auto-feeder |
| Platinum | 1500+ | 15% | All items |

### Visual Design
- **Real snakes:** Gold border (#FFD700), cream background, "üêç REAL" badge
- **Virtual snakes:** Purple border (#8B5CF6), lavender background, "üéÆ VIRTUAL" badge
- **Stat bars:** Color-coded progress bars (hunger=red, water=cyan, health=green, etc.)
- **Mobile responsive:** Works on all screen sizes

---

## Testing

### Run Tests
```bash
npm test              # All tests
npm run test:unit     # Unit tests (15)
npm run test:snapshot # Snapshot tests (40)
```

### Test Coverage
**Unit Tests (15):**
- Species profiles exist
- Morphs database complete
- Equipment catalog (15+ items)
- Currency conversion
- Virtual snake purchases
- Loyalty tier system
- Shop purchases
- Equipment installation

**Snapshot Tests (40):**
- HTML structure
- All UI elements present
- JavaScript imports
- CSS styling
- Modal components
- Navigation system

**Results:** 55/55 passing (100%)

---

## Settings Menu

Access via ‚öôÔ∏è button in header:
- **Game Speed:** 1x-100x slider (for testing)
- **Save Game:** Manual save button
- **Reset Game:** Clear all progress
- **Debug Mode:** Ctrl+Shift+D to enable (adds 1000 gold)

---

## Data Models

### Game State
```javascript
{
  player_id: "player_xxx",
  currency: { gold: 1000 },
  loyalty_points: 0,
  loyalty_tier: "bronze",
  shop_discount: 0,
  snakes: [...],
  equipment_inventory: [...],
  transaction_history: [],
  game_speed: 1,
  last_save: "2025-12-21T..."
}
```

### Snake Instance
```javascript
{
  id: "snake_xxx",
  species: "ball_python",
  morph: "banana",
  nickname: "Banana Joe",
  sex: "male",
  birth_date: "2024-01-15",
  type: "real", // or "virtual"
  
  // Physical
  weight_grams: 450,
  length_cm: 90,
  life_stage: "adult",
  
  // Stats (0-100)
  stats: {
    hunger: 80, water: 100,
    temperature: 88, humidity: 60,
    health: 85, stress: 15,
    cleanliness: 90, happiness: 75
  },
  
  // Care tracking
  last_fed: "2024-06-20T10:00:00Z",
  last_watered: "2024-06-21T08:00:00Z",
  last_cleaned: "2024-06-19T18:00:00Z",
  
  // Shedding
  shed_cycle: {
    stage: "normal",
    last_shed: "2024-05-20",
    days_since_last: 32
  },
  
  // Equipment
  equipment: {
    heater: { type: "heat_mat", working: true },
    mister: { type: "manual", working: true },
    thermometer: true,
    hygrometer: true
  }
}
```

---

## Hosting in Termux

### Setup (proot Ubuntu)
```bash
cd /root/catalog
python3 -m http.server 8000 --bind 0.0.0.0
```

### Access
- **Same device:** `http://localhost:8000/game.html`
- **Other devices:** `http://YOUR_PHONE_IP:8000/game.html`

### Find IP
```bash
hostname -I
# or
ip addr show wlan0 | grep inet
```

### Keep Running
```bash
# Use tmux
tmux new -s serpent
python3 -m http.server 8000
# Detach: Ctrl+B then D

# Or use nohup
nohup python3 -m http.server 8000 &
```

### Add to Home Screen
1. Open game in phone browser
2. Menu (‚ãÆ) ‚Üí "Add to Home screen"
3. Name it "Serpent Town"
4. Done! Now you have an app icon

---

## Deployment Options

### GitHub Pages
```bash
git add .
git commit -m "Serpent Town v3.2"
git push origin main
# Enable Pages in repo Settings ‚Üí Pages
# Access: https://username.github.io/repo/game.html
```

### Netlify/Vercel
- Drag and drop `catalog/` folder
- Or connect GitHub repo
- Instant deploy with custom URL

---

## API Reference

### Economy
```javascript
// Convert money to gold
Economy.moneyToCurrency(100) // ‚Üí 100 gold

// Buy virtual snake
Economy.buyVirtualSnake('corn_snake', [], gameState)

// Update loyalty tier
Economy.updateLoyaltyTier(gameState)

// Get tier discount
Economy.getTierDiscount('silver') // ‚Üí 0.05 (5%)
```

### Shop
```javascript
// Get available items
EquipmentShop.getAvailableItems(gameState)

// Buy equipment
EquipmentShop.buyEquipment('heat_mat_basic', snakeId, gameState)

// Check equipment status
EquipmentShop.checkEquipmentStatus(snake)
```

### Species
```javascript
// Get profile
SPECIES_PROFILES.ball_python

// Get life stage
getLifeStage(snake) // ‚Üí "adult"

// Get feeding schedule
getFeedingSchedule(snake)
```

---

## MVP Status

| # | Feature | Status |
|---|---------|--------|
| 1 | Species profiles (2) | ‚úÖ |
| 2 | 8 stats system | ‚úÖ |
| 3 | Life stages | ‚úÖ |
| 4 | Shedding cycle | ‚úÖ |
| 5 | Equipment shop (5+) | ‚úÖ 15+ |
| 6 | Currency economy | ‚úÖ |
| 7 | Real/virtual styling | ‚úÖ |
| 8 | Vacation mode | ‚úÖ |
| 9 | Fast-forward | ‚úÖ |
| 10 | Auto-save | ‚úÖ |
| 11 | Mobile responsive | ‚úÖ |
| 12 | Genetics calculator | ‚è≥ |
| 13 | Encyclopedia | ‚è≥ |

**Complete: 11/13 (85%)**

---

## Phase 2 Features (Pending)

### Genetics Calculator
- Punnett square logic
- Offspring prediction
- Visual phenotype display
- Clutch size estimation

### Encyclopedia
- Species guides (markdown)
- Morph galleries
- Care tutorials
- Genetics lessons

### Health Events
- Automatic illness triggers
- Vet visit system
- Recovery mechanics
- Health alerts

### Breeding System
- Mate selection
- Egg incubation
- Hatchling care
- Genetic inheritance

---

## Troubleshooting

### Tests Failing
```bash
# Check location
pwd  # Should be /root/catalog

# Check Node.js
node --version

# Re-run tests
npm test
```

### Server Not Starting
```bash
# Check port
lsof -i :8000

# Kill existing server
kill $(lsof -t -i:8000)

# Restart
python3 -m http.server 8000
```

### Game Not Loading
1. Check server is running
2. Check URL: `http://localhost:8000/game.html`
3. Check browser console for errors
4. Clear cache and reload

### Stats Not Decaying
- Check game speed slider in settings
- Check if vacation mode is on
- Refresh page

---

## Performance

- **Game loop:** 1 second interval
- **Auto-save:** 30 second interval
- **Load time:** < 1 second
- **Memory:** ~20MB
- **Battery:** Minimal impact

---

## Browser Support

- ‚úÖ Chrome/Edge 90+
- ‚úÖ Firefox 88+
- ‚úÖ Safari 14+
- ‚úÖ Mobile browsers
- ‚ùå IE (not supported)

---

## Security

- **Local only:** No data sent to servers
- **LocalStorage:** All data stays on device
- **No auth:** No passwords stored
- **Safe:** No external dependencies

---

## Known Limitations

1. **No cloud sync** - Data only on device
2. **Single player** - No multiplayer yet
3. **Basic genetics** - Punnett square not implemented
4. **No encyclopedia content** - Structure ready, needs content
5. **No health events** - Illness triggers not automatic yet

---

## Roadmap

### Immediate
- Deploy to GitHub Pages
- Test with users
- Gather feedback

### Phase 2 (Week 2)
- Genetics calculator implementation
- Encyclopedia content (10 articles)
- Health event triggers
- Breeding system

### Phase 3 (Week 3+)
- Backend (Cloudflare Worker)
- Stripe webhooks
- User accounts
- Social features

---

## Contributing

This is a solo project currently. For questions or issues:
1. Check this documentation
2. Run tests: `npm test`
3. Check browser console for errors

---

## License

MIT License - Free to use and modify

---

## Credits

Built with plain JavaScript - no frameworks, no dependencies.

**Environment:** proot-distro Ubuntu (Termux)  
**Testing:** 55 automated tests  
**Documentation:** This file  

---

## Final Notes

**The game is production ready:**
- ‚úÖ All core features working
- ‚úÖ 55/55 tests passing
- ‚úÖ Zero dependencies
- ‚úÖ Mobile responsive
- ‚úÖ Well documented
- ‚úÖ Easy to deploy

**Just run:** `python3 -m http.server 8000` and play!

---

*Last updated: December 21, 2025*  
*Version: 3.2.0*  
*Status: Production Ready*
