# ğŸ Serpent Town - Pragmatic MVP Implementation Plan v3.1

## âœ… YES - Start with Simple Website First, Godot Later!

**Strategy**: Build working website NOW with plain JavaScript, then optionally migrate to Godot when needed.

---

## ğŸ¯ REVISED APPROACH: Simple & Practical

### Phase 1A: Website MVP (Weeks 1-2) â­ START HERE
**Goal**: Get catalog + basic care working FAST using existing code

**What You Already Have** âœ…:
```
/root/catalog/
â”œâ”€â”€ index.html (basic UI)
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ core.js (plugin system, works!)
â”‚   â”œâ”€â”€ constants.js
â”‚   â”œâ”€â”€ plugins/
â”‚   â”‚   â”œâ”€â”€ shop.js
â”‚   â”‚   â”œâ”€â”€ tamagotchi.js
â”‚   â”‚   â””â”€â”€ snakes.js
â”œâ”€â”€ data/products.json (2 real snakes)
â””â”€â”€ img/super-banana.jpg
```

**What to Do**:
1. âœ… **Keep existing plugin architecture** (it works, don't rewrite!)
2. âœ… **Enhance what's there** (add missing stats: temp, humidity, weight, shed)
3. âœ… **Add LocalStorage save** (persist data on refresh)
4. âœ… **Style it better** (basic CSS, mobile-friendly)
5. âœ… **Connect to Stripe** (existing payment links already work!)

### Phase 1B: Optional Godot Migration (Weeks 8+)
**ONLY IF NEEDED** for:
- Complex animations
- Better mobile app experience
- Advanced UI (inventory drag-and-drop)

**Can reuse**:
- Same data structures (products.json)
- Same business logic (stat decay, actions)
- Same Stripe integration

---

## ğŸ“‹ WEEK-BY-WEEK PLAN (Simple JavaScript)

### **Week 1: Enhance Existing Catalog**

**Day 1-2: Extend Stats System**
```javascript
// src/constants.js - ADD these
export const CARE_STATS = {
  HUNGER: "hunger",
  WATER: "water",          // NEW
  TEMPERATURE: "temperature", // NEW
  HUMIDITY: "humidity",    // NEW
  HEALTH: "health",        // NEW
  STRESS: "stress",        // NEW
  CLEAN: "clean"
};

export const STAT_RANGES = {
  temperature: { min: 75, ideal: 88, max: 95 },
  humidity: { min: 40, ideal: 60, max: 70 }
};
```

**Day 3-4: Add New Actions**
```javascript
// src/core.js - EXTEND applyAction()
export function applyAction(actionId, instance, profile = {}) {
  if (!instance || !instance.care) return;
  
  switch (actionId) {
    case 'feed':
      instance.care.hunger = DEFAULTS.STAT_MAX;
      break;
    case 'water':              // NEW
      instance.care.water = DEFAULTS.STAT_MAX;
      break;
    case 'adjust_temp':        // NEW
      // handled by slider in UI
      break;
    case 'mist':               // NEW
      instance.care.humidity = Math.min(100, instance.care.humidity + 20);
      break;
    case 'clean':
      instance.care.clean = DEFAULTS.STAT_MAX;
      break;
    case 'handle':             // NEW
      instance.care.stress = Math.min(100, instance.care.stress + 5);
      break;
    default:
      break;
  }
}
```

**Day 5: Add LocalStorage Save**
```javascript
// src/save-system.js - NEW FILE
export function saveGame(gameState) {
  localStorage.setItem('serpent_town_save', JSON.stringify(gameState));
}

export function loadGame() {
  const saved = localStorage.getItem('serpent_town_save');
  return saved ? JSON.parse(saved) : getDefaultGameState();
}

function getDefaultGameState() {
  return {
    user_email: 'demo@serpent.town',
    currency: { gold: 1000 },
    snakes: [],
    last_save_time: Date.now()
  };
}

// Auto-save every 30 seconds
setInterval(() => {
  saveGame(window.gameState);
}, 30000);
```

**Day 6-7: Better UI (Simple CSS)**
```html
<!-- index.html - IMPROVE LAYOUT -->
<style>
/* Mobile-first, simple design */
* { box-sizing: border-box; }

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  max-width: 600px;
  margin: 0 auto;
  padding: 1rem;
  background: #f5f5f5;
}

.snake-card {
  background: white;
  border-radius: 12px;
  padding: 1rem;
  margin: 1rem 0;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.snake-card.real {
  border: 3px solid #ffd700; /* Gold for real snakes */
}

.snake-card.virtual {
  border: 3px solid #6366f1; /* Purple for virtual */
}

.stat-bar {
  background: #e5e7eb;
  height: 20px;
  border-radius: 10px;
  overflow: hidden;
  margin: 0.5rem 0;
}

.stat-fill {
  background: linear-gradient(90deg, #10b981, #34d399);
  height: 100%;
  transition: width 0.3s;
}

.stat-fill.low {
  background: linear-gradient(90deg, #ef4444, #f87171);
}

button {
  background: #3b82f6;
  color: white;
  border: none;
  padding: 0.75rem 1.5rem;
  border-radius: 8px;
  font-size: 1rem;
  cursor: pointer;
  margin: 0.25rem;
}

button:hover {
  background: #2563eb;
}

button:active {
  transform: scale(0.98);
}

.slider {
  width: 100%;
  height: 8px;
  border-radius: 4px;
  background: #e5e7eb;
  outline: none;
}

/* Mobile responsive */
@media (max-width: 640px) {
  body { padding: 0.5rem; }
  .snake-card { padding: 0.75rem; }
  button { padding: 0.5rem 1rem; font-size: 0.9rem; }
}
</style>
```

---

### **Week 2: Connect to Stripe + Deploy**

**Day 8-10: Stripe Integration**
```javascript
// src/stripe-integration.js - NEW FILE

// Load products from Stripe (or products.json for now)
export async function loadProducts() {
  // Option 1: Direct from products.json (SIMPLE)
  const response = await fetch('./data/products.json');
  const products = await response.json();
  return products;
  
  // Option 2: From Cloudflare Worker (later)
  // const response = await fetch('/.netlify/functions/get-products');
  // return await response.json();
}

// Handle purchase
export function buySnake(product) {
  // Open Stripe payment link in new tab
  window.open(product.stripe_link, '_blank');
  
  // Show message
  alert(`Opening Stripe checkout for ${product.name}. After purchase, email us at support@serpenttown.com with your order ID to unlock in-game!`);
  
  // TODO: Later, use webhook to auto-unlock
}

// Manual unlock (MVP workaround)
export function unlockSnake(productId, gameState) {
  const product = products.find(p => p.id === productId);
  if (!product) return;
  
  gameState.snakes.push({
    id: `snake_${Date.now()}`,
    product_id: productId,
    name: product.name,
    stats: {
      hunger: 100,
      water: 100,
      temperature: 88,
      humidity: 60,
      health: 100,
      stress: 0,
      clean: 100
    },
    acquired_date: Date.now(),
    type: 'real' // vs 'virtual'
  });
  
  saveGame(gameState);
}
```

**Day 11-12: Deploy to GitHub Pages**
```bash
# Your existing catalog folder is already a website!
cd /root/catalog

# Initialize git (if not already)
git init
git add .
git commit -m "Serpent Town MVP v1"

# Create GitHub repo (via web or CLI)
gh repo create serpent-town --public --source=. --remote=origin

# Push to GitHub
git branch -M main
git push -u origin main

# Enable GitHub Pages
# Go to: Settings > Pages > Source: main branch > Save

# Your site will be live at:
# https://yourusername.github.io/serpent-town/
```

**Day 13-14: Test & Polish**
- Test on mobile (Chrome, Safari)
- Test purchase flow (Stripe test mode)
- Test save/load (refresh page)
- Fix bugs
- Add tutorial overlay

---

## ğŸ¨ SIMPLE UI MOCKUP (HTML/CSS)

### Improved index.html Structure
```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Serpent Town - Snake Care & Collection</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Navigation -->
  <nav class="nav-tabs">
    <button class="tab active" data-tab="farm">ğŸ  My Farm</button>
    <button class="tab" data-tab="shop">ğŸ›’ Shop</button>
    <button class="tab" data-tab="calculator">ğŸ§¬ Calculator</button>
  </nav>

  <!-- Currency Display -->
  <div class="currency-bar">
    <span>ğŸ’° Gold: <strong id="gold-amount">1,000</strong></span>
    <span>ğŸ† Loyalty: <strong id="loyalty-tier">Bronze</strong></span>
  </div>

  <!-- Farm Tab (Collection) -->
  <div id="tab-farm" class="tab-content active">
    <h2>Your Snake Collection</h2>
    <div id="snake-grid" class="snake-grid">
      <!-- Snake cards populated by JS -->
    </div>
    <button id="add-room-btn">+ Add Room (500 gold)</button>
  </div>

  <!-- Shop Tab -->
  <div id="tab-shop" class="tab-content">
    <h2>Snake Shop</h2>
    <div id="shop-grid" class="shop-grid">
      <!-- Product cards populated by JS -->
    </div>
  </div>

  <!-- Calculator Tab -->
  <div id="tab-calculator" class="tab-content">
    <h2>Genetics Calculator</h2>
    <div class="calculator-ui">
      <select id="parent1">
        <option>Select Parent 1</option>
      </select>
      <div class="multiply-symbol">Ã—</div>
      <select id="parent2">
        <option>Select Parent 2</option>
      </select>
      <button id="calculate-btn">Calculate Offspring</button>
      <div id="results"></div>
    </div>
  </div>

  <!-- Modal: Snake Care (Tamagotchi) -->
  <div id="care-modal" class="modal hidden">
    <div class="modal-content">
      <button class="close-btn">Ã—</button>
      <h2 id="snake-name">Snake Name</h2>
      <img id="snake-image" src="" alt="">
      
      <!-- Stats -->
      <div class="stat">
        <label>ğŸ” Hunger</label>
        <div class="stat-bar">
          <div class="stat-fill" id="hunger-bar"></div>
        </div>
        <span id="hunger-text">100%</span>
      </div>
      
      <div class="stat">
        <label>ğŸ’§ Water</label>
        <div class="stat-bar">
          <div class="stat-fill" id="water-bar"></div>
        </div>
        <span id="water-text">100%</span>
      </div>
      
      <div class="stat">
        <label>ğŸŒ¡ï¸ Temperature</label>
        <input type="range" class="slider" id="temp-slider" min="75" max="95" value="88">
        <span id="temp-text">88Â°F</span>
      </div>
      
      <div class="stat">
        <label>ğŸ’¦ Humidity</label>
        <div class="stat-bar">
          <div class="stat-fill" id="humidity-bar"></div>
        </div>
        <span id="humidity-text">60%</span>
      </div>
      
      <!-- Actions -->
      <div class="action-buttons">
        <button id="feed-btn">ğŸ” Feed</button>
        <button id="water-btn">ğŸ’§ Water</button>
        <button id="mist-btn">ğŸ’¦ Mist</button>
        <button id="clean-btn">ğŸ§¹ Clean</button>
        <button id="handle-btn">ğŸ¤š Handle</button>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script type="module" src="./src/main.js"></script>
</body>
</html>
```

### Main JavaScript (Simple & Direct)
```javascript
// src/main.js
import { CARE_STATS, DEFAULTS } from './constants.js';
import * as Core from './core.js';
import { saveGame, loadGame } from './save-system.js';
import { loadProducts, buySnake } from './stripe-integration.js';

// Global state
window.gameState = loadGame();
let currentSnake = null;
let products = [];

// Initialize
async function init() {
  products = await loadProducts();
  renderFarm();
  renderShop();
  setupEventListeners();
  startStatDecay();
}

// Render farm (snake collection)
function renderFarm() {
  const grid = document.getElementById('snake-grid');
  grid.innerHTML = '';
  
  if (gameState.snakes.length === 0) {
    grid.innerHTML = '<p>No snakes yet. Visit the shop!</p>';
    return;
  }
  
  gameState.snakes.forEach(snake => {
    const card = createSnakeCard(snake);
    grid.appendChild(card);
  });
}

// Create snake card
function createSnakeCard(snake) {
  const div = document.createElement('div');
  div.className = `snake-card ${snake.type}`;
  div.innerHTML = `
    <img src="${getSnakeImage(snake)}" alt="${snake.name}" width="100%">
    <h3>${snake.name}</h3>
    <div class="mini-stats">
      <span>ğŸ” ${Math.round(snake.stats.hunger)}%</span>
      <span>ğŸ’§ ${Math.round(snake.stats.water)}%</span>
      <span>â¤ï¸ ${Math.round(snake.stats.health)}%</span>
    </div>
    <button class="care-btn" data-id="${snake.id}">Care</button>
  `;
  
  div.querySelector('.care-btn').addEventListener('click', () => {
    openCareModal(snake);
  });
  
  return div;
}

// Render shop
function renderShop() {
  const grid = document.getElementById('shop-grid');
  grid.innerHTML = '';
  
  products.forEach(product => {
    const card = document.createElement('div');
    card.className = 'snake-card real';
    card.innerHTML = `
      <img src="${product.img}" alt="${product.name}" width="100%">
      <h3>${product.name}</h3>
      <p>${product.info}</p>
      <p><strong>$${product.price}</strong></p>
      <button class="buy-btn" data-id="${product.id}">Buy Now</button>
    `;
    
    card.querySelector('.buy-btn').addEventListener('click', () => {
      buySnake(product);
    });
    
    grid.appendChild(card);
  });
}

// Open care modal (Tamagotchi UI)
function openCareModal(snake) {
  currentSnake = snake;
  const modal = document.getElementById('care-modal');
  modal.classList.remove('hidden');
  
  updateCareUI();
}

// Update care UI with current stats
function updateCareUI() {
  if (!currentSnake) return;
  
  document.getElementById('snake-name').textContent = currentSnake.name;
  document.getElementById('snake-image').src = getSnakeImage(currentSnake);
  
  updateStatBar('hunger', currentSnake.stats.hunger);
  updateStatBar('water', currentSnake.stats.water);
  updateStatBar('humidity', currentSnake.stats.humidity);
  
  document.getElementById('temp-slider').value = currentSnake.stats.temperature;
  document.getElementById('temp-text').textContent = `${currentSnake.stats.temperature}Â°F`;
}

// Update stat bar
function updateStatBar(stat, value) {
  const bar = document.getElementById(`${stat}-bar`);
  const text = document.getElementById(`${stat}-text`);
  
  bar.style.width = `${value}%`;
  bar.className = `stat-fill ${value < 30 ? 'low' : ''}`;
  text.textContent = `${Math.round(value)}%`;
}

// Action buttons
function setupEventListeners() {
  document.getElementById('feed-btn').addEventListener('click', () => {
    Core.applyAction('feed', currentSnake);
    updateCareUI();
    saveGame(gameState);
  });
  
  document.getElementById('water-btn').addEventListener('click', () => {
    Core.applyAction('water', currentSnake);
    updateCareUI();
    saveGame(gameState);
  });
  
  document.getElementById('mist-btn').addEventListener('click', () => {
    Core.applyAction('mist', currentSnake);
    updateCareUI();
    saveGame(gameState);
  });
  
  document.getElementById('temp-slider').addEventListener('input', (e) => {
    currentSnake.stats.temperature = parseInt(e.target.value);
    document.getElementById('temp-text').textContent = `${e.target.value}Â°F`;
    saveGame(gameState);
  });
  
  // Tab navigation
  document.querySelectorAll('.tab').forEach(tab => {
    tab.addEventListener('click', () => {
      const tabName = tab.dataset.tab;
      showTab(tabName);
    });
  });
  
  // Close modal
  document.querySelector('.close-btn').addEventListener('click', () => {
    document.getElementById('care-modal').classList.add('hidden');
  });
}

// Stat decay (every minute)
function startStatDecay() {
  setInterval(() => {
    gameState.snakes.forEach(snake => {
      snake.stats.hunger = Math.max(0, snake.stats.hunger - 0.5);
      snake.stats.water = Math.max(0, snake.stats.water - 0.3);
      
      // Health decreases if hunger/water too low
      if (snake.stats.hunger < 20 || snake.stats.water < 20) {
        snake.stats.health = Math.max(0, snake.stats.health - 1);
      }
    });
    
    saveGame(gameState);
    
    // Update UI if care modal is open
    if (currentSnake && !document.getElementById('care-modal').classList.contains('hidden')) {
      updateCareUI();
    }
  }, 60000); // Every minute
}

// Helper functions
function getSnakeImage(snake) {
  const product = products.find(p => p.id === snake.product_id);
  return product ? product.img : 'img/placeholder.jpg';
}

function showTab(tabName) {
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
  
  document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
  document.getElementById(`tab-${tabName}`).classList.add('active');
}

// Start the app
init();
```

---

## âœ… BENEFITS OF THIS APPROACH

### Why Start with Simple Website:
1. âœ… **Use existing code** (don't rewrite, enhance!)
2. âœ… **Fast deployment** (GitHub Pages in 10 minutes)
3. âœ… **Low complexity** (vanilla JS, no build tools)
4. âœ… **Works everywhere** (all browsers, mobile)
5. âœ… **Easy to test** (just open index.html)
6. âœ… **Quick iterations** (edit, refresh, done)
7. âœ… **Stripe already integrated** (payment links work)

### When to Consider Godot:
- âŒ NOT NEEDED for catalog + care + shop
- âŒ NOT NEEDED for stats, decay, actions
- âŒ NOT NEEDED for Stripe integration
- âœ… ONLY IF: Complex animations, native mobile app, advanced UI

### Migration Path (If Needed Later):
```
Week 1-2:  Website MVP (plain JS) â† START HERE
Week 3-4:  Polish, deploy, test
Week 5-6:  Add genetics calculator (JS)
Week 7-8:  Add social features (JS)
Week 9+:   Evaluate: Is Godot needed?
           - If no animations needed â†’ Stay with JS
           - If animations wanted â†’ Migrate to Godot
           - Reuse: Same data, same logic, just new rendering
```

---

## ğŸš€ THIS WEEK'S ACTION PLAN (Revised)

### Monday-Tuesday (Days 1-2):
```bash
cd /root/catalog

# 1. Add new stats to constants.js
# 2. Add new actions to core.js (water, mist, handle)
# 3. Test in browser: python -m http.server 5000
```

### Wednesday-Thursday (Days 3-4):
```bash
# 4. Create save-system.js (LocalStorage)
# 5. Create main.js (better UI logic)
# 6. Update index.html (cleaner layout)
# 7. Add style.css (mobile-first design)
```

### Friday-Saturday (Days 5-6):
```bash
# 8. Test save/load (refresh page, data persists)
# 9. Test actions (feed, water, stats change)
# 10. Deploy to GitHub Pages
```

### Sunday (Day 7):
```bash
# 11. Test on mobile (phone browser)
# 12. Share with 5 friends for feedback
# 13. Fix obvious bugs
# 14. Celebrate MVP! ğŸ‰
```

---

## ğŸ“Š COMPARISON: Simple JS vs Godot

| Feature | Simple JS (Website) | Godot (Game) |
|---------|---------------------|--------------|
| **Setup Time** | 5 minutes | 2 hours |
| **Code Reuse** | 100% (existing) | 50% (rewrite UI) |
| **Learning Curve** | None (you know JS) | Medium (learn Godot) |
| **Deployment** | GitHub Pages (free, instant) | Export + host (complex) |
| **Mobile Support** | Works immediately | Requires build |
| **Debugging** | Browser DevTools (easy) | Godot debugger (harder) |
| **Animations** | CSS (basic) | Advanced (sprites, physics) |
| **Performance** | Good enough | Better for complex games |
| **Community** | Huge (JavaScript) | Smaller (Godot) |
| **Cost** | $0 | $0 |

**Verdict**: Start with Simple JS, migrate to Godot ONLY if needed later.

---

## ğŸ¯ MVP DEFINITION (Simple JS Version)

### Must Have (Week 1-2):
- âœ… Display 2 real snakes from products.json
- âœ… Display snake stats (8 stats: hunger, water, temp, humidity, health, stress, weight, shed)
- âœ… Actions work (feed, water, adjust temp, mist, clean, handle)
- âœ… Stats decay over time (realistic)
- âœ… Save/load with LocalStorage
- âœ… Stripe payment links work
- âœ… Mobile-responsive design

### Nice to Have (Week 3-4):
- Tutorial overlay
- Genetics calculator (basic)
- Virtual starter snake
- Currency system
- Multiple snakes in collection

### Can Wait (Week 5+):
- Animations
- Social features
- Backend (Cloudflare Worker)
- Webhook auto-unlock
- Native mobile app

---

## âœ… DECISION: START WITH SIMPLE WEBSITE

**Yes, you can absolutely:**
1. âœ… Create website first (simple JS)
2. âœ… Reuse catalog, tamagotchi, shop
3. âœ… Enhance existing code (don't rewrite)
4. âœ… Deploy fast (GitHub Pages)
5. âœ… Godot later (only if needed)

**This is the smartest approach** because:
- Fastest time-to-market
- Lowest risk (use what works)
- Easy to test and iterate
- Can always migrate later if needed

---

**Document Version**: 3.1 (Pragmatic Implementation)
**Last Updated**: 2025-12-21
**Status**: âœ… READY TO CODE
**Start**: TODAY

**Let's build the simple website MVP this week! ğŸš€**
