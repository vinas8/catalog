<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üêç Snake Dex - Detailed Encyclopedia</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: #f5f7fa;
            color: #2d3748;
        }
        
        .dex-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        /* Grid View - 2 columns on mobile like Pokemon DB */
        .morphs-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr); /* Always 2 columns on mobile */
            gap: 0.5rem;
            margin-bottom: 2rem;
        }
        
        /* Larger screens: more columns */
        @media (min-width: 768px) {
            .morphs-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 1rem;
            }
        }
        
        @media (min-width: 1024px) {
            .morphs-grid {
                grid-template-columns: repeat(6, 1fr);
            }
        }
        
        .morph-thumb {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 0.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        @media (min-width: 768px) {
            .morph-thumb {
                padding: 1rem;
            }
        }
        
        .morph-thumb:hover {
            border-color: #4299e1;
            transform: translateY(-4px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .morph-thumb img {
            width: 100px;
            height: 100px;
            object-fit: contain;
        }
        
        .morph-number {
            font-size: 0.8rem;
            color: #a0aec0;
            margin-bottom: 0.5rem;
        }
        
        .morph-name {
            font-weight: bold;
            font-size: 0.95rem;
            margin-top: 0.5rem;
        }
        
        /* Detailed View (like Pokemon DB) */
        .morph-detail {
            display: none;
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .morph-detail.active {
            display: block;
        }
        
        .detail-header {
            display: grid;
            grid-template-columns: 200px 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
            padding-bottom: 2rem;
            border-bottom: 2px solid #e2e8f0;
        }
        
        .detail-image img {
            width: 200px;
            height: 200px;
            object-fit: contain;
        }
        
        .detail-info h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }
        
        .detail-number {
            color: #a0aec0;
            font-size: 1.2rem;
            margin-bottom: 1rem;
        }
        
        .detail-badges {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .badge {
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: bold;
            text-transform: uppercase;
        }
        
        .badge-gene { background: #bee3f8; color: #2c5282; }
        .badge-rarity { background: #fbd38d; color: #7c2d12; }
        .badge-health { background: #fc8181; color: #742a2a; }
        
        /* Stats Table (like Pokemon DB) */
        .stats-section {
            margin: 2rem 0;
        }
        
        .stats-section h2 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #2d3748;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }
        
        .stat-box {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 1rem;
        }
        
        .stat-label {
            font-size: 0.85rem;
            color: #718096;
            margin-bottom: 0.3rem;
        }
        
        .stat-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #2d3748;
        }
        
        /* Genetics Section */
        .genetics-section {
            background: #f0fff4;
            border: 2px solid #9ae6b4;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        
        .genetics-title {
            font-size: 1.3rem;
            color: #22543d;
            margin-bottom: 1rem;
        }
        
        /* Health Risks */
        .health-section {
            background: #fff5f5;
            border: 2px solid #fc8181;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        
        .health-title {
            font-size: 1.3rem;
            color: #742a2a;
            margin-bottom: 1rem;
        }
        
        .health-issue {
            background: white;
            padding: 1rem;
            border-radius: 6px;
            margin-bottom: 0.5rem;
        }
        
        /* Breeding Section */
        .breeding-section {
            background: #fef5e7;
            border: 2px solid #f6ad55;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        
        .breeding-title {
            font-size: 1.3rem;
            color: #7c2d12;
            margin-bottom: 1rem;
        }
        
        /* Back button */
        .back-btn {
            padding: 0.8rem 1.5rem;
            background: #4299e1;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            margin-bottom: 1rem;
        }
        
        .back-btn:hover {
            background: #3182ce;
        }
    </style>
</head>
<body>
    <div class="dex-container">
        <h1 style="text-align: center; margin-bottom: 2rem; font-size: 2.5rem;">üêç Ball Python Dex</h1>
        
        <!-- Grid View -->
        <div id="grid-view" class="morphs-grid"></div>
        
        <!-- Detail View -->
        <div id="detail-view" class="morph-detail"></div>
    </div>

    <script type="module">
        // Load all genetics data
        const [morphsBase, morphsExpanded, geneTypes, healthRisks] = await Promise.all([
            fetch('../data/genetics/morphs.json').then(r => r.json()),
            fetch('../data/genetics/morphs-expanded.json').then(r => r.json()),
            fetch('../data/genetics/gene-types.json').then(r => r.json()),
            fetch('../data/genetics/health-risks.json').then(r => r.json())
        ]);
        
        const allMorphs = [...morphsBase.morphs, ...morphsExpanded.morphs].map((m, i) => ({
            ...m,
            index: i + 1
        }));

        // Render grid
        function renderGrid() {
            const grid = document.getElementById('grid-view');
            grid.innerHTML = allMorphs.map(morph => `
                <div class="morph-thumb" onclick="showDetail('${morph.id}')">
                    <div class="morph-number">#${String(morph.index).padStart(3, '0')}</div>
                    <svg width="100" height="100" viewBox="0 0 100 100" style="opacity: 0.3;">
                        <path d="M20,50 Q30,30 50,30 T80,50 Q70,60 60,65 Q50,70 40,65 Q30,60 20,50" 
                              fill="#4a5568" stroke="#2d3748" stroke-width="2"/>
                        <circle cx="45" cy="40" r="2" fill="#2d3748"/>
                        <circle cx="55" cy="40" r="2" fill="#2d3748"/>
                    </svg>
                    <div class="morph-name">${morph.name}</div>
                </div>
            `).join('');
        }

        // Show detailed view (like Pokemon DB)
        window.showDetail = function(morphId) {
            const morph = allMorphs.find(m => m.id === morphId);
            if (!morph) return;

            const geneInfo = geneTypes.gene_types[morph.gene_type] || {};
            const healthIssues = healthRisks.documented_issues.filter(h => h.morph === morphId);

            document.getElementById('grid-view').style.display = 'none';
            const detailView = document.getElementById('detail-view');
            detailView.classList.add('active');
            
            detailView.innerHTML = `
                <button class="back-btn" onclick="showGrid()">‚Üê Back to Dex</button>
                
                <div class="detail-header">
                    <div class="detail-image">
                        <svg width="200" height="200" viewBox="0 0 200 200" style="opacity: 0.2;">
                            <path d="M40,100 Q60,60 100,60 T160,100 Q140,120 120,130 Q100,140 80,130 Q60,120 40,100" 
                                  fill="#4a5568" stroke="#2d3748" stroke-width="3"/>
                            <circle cx="90" cy="80" r="4" fill="#2d3748"/>
                            <circle cx="110" cy="80" r="4" fill="#2d3748"/>
                            <text x="100" y="110" text-anchor="middle" font-size="16" fill="#718096">Ball Python</text>
                        </svg>
                    </div>
                    <div class="detail-info">
                        <div class="detail-number">National ‚Ññ ${String(morph.index).padStart(4, '0')}</div>
                        <h1>${morph.name}</h1>
                        <div class="detail-badges">
                            <span class="badge badge-gene">${morph.gene_type}</span>
                            <span class="badge badge-rarity">${morph.rarity}</span>
                            ${morph.health_risk !== 'none' ? `<span class="badge badge-health">‚ö†Ô∏è ${morph.health_risk} risk</span>` : ''}
                        </div>
                        ${morph.aliases?.length ? `<p><strong>Also known as:</strong> ${morph.aliases.join(', ')}</p>` : ''}
                    </div>
                </div>

                <!-- Dex Data (Most Important First - Like Pokemon DB) -->
                <div class="stats-section">
                    <h2>üìä Morph Data</h2>
                    <table style="width: 100%; border-collapse: collapse; background: #f7fafc;">
                        <tr style="border-bottom: 1px solid #e2e8f0;">
                            <td style="padding: 0.8rem; font-weight: bold; width: 150px;">National ‚Ññ</td>
                            <td style="padding: 0.8rem;">${String(morph.index).padStart(4, '0')}</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #e2e8f0;">
                            <td style="padding: 0.8rem; font-weight: bold;">Gene Type</td>
                            <td style="padding: 0.8rem;"><span class="badge badge-gene">${morph.gene_type}</span></td>
                        </tr>
                        <tr style="border-bottom: 1px solid #e2e8f0;">
                            <td style="padding: 0.8rem; font-weight: bold;">Species</td>
                            <td style="padding: 0.8rem;">Ball Python (Python regius)</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #e2e8f0;">
                            <td style="padding: 0.8rem; font-weight: bold;">Avg Length</td>
                            <td style="padding: 0.8rem;">1.0-1.5 m (3-5 ft)</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #e2e8f0;">
                            <td style="padding: 0.8rem; font-weight: bold;">Avg Weight</td>
                            <td style="padding: 0.8rem;">1.2-1.8 kg (2.5-4 lbs)</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #e2e8f0;">
                            <td style="padding: 0.8rem; font-weight: bold;">Lifespan</td>
                            <td style="padding: 0.8rem;">20-30 years</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #e2e8f0;">
                            <td style="padding: 0.8rem; font-weight: bold;">Rarity</td>
                            <td style="padding: 0.8rem;"><span class="badge badge-rarity">${morph.rarity}</span></td>
                        </tr>
                        <tr>
                            <td style="padding: 0.8rem; font-weight: bold;">Market Value</td>
                            <td style="padding: 0.8rem; font-size: 1.2rem; font-weight: bold; color: #38a169;">$${morph.market_value_usd}</td>
                        </tr>
                    </table>
                </div>

                <!-- Care Requirements (Most Important!) -->
                <div class="breeding-section">
                    <h2>üå°Ô∏è Care Requirements</h2>
                    <table style="width: 100%; border-collapse: collapse; background: white;">
                        <tr style="border-bottom: 1px solid #f6ad55;">
                            <td style="padding: 0.8rem; font-weight: bold; width: 150px;">Temperature (Day)</td>
                            <td style="padding: 0.8rem;">28-32¬∞C (82-90¬∞F)</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #f6ad55;">
                            <td style="padding: 0.8rem; font-weight: bold;">Temperature (Night)</td>
                            <td style="padding: 0.8rem;">24-26¬∞C (75-79¬∞F)</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #f6ad55;">
                            <td style="padding: 0.8rem; font-weight: bold;">Humidity</td>
                            <td style="padding: 0.8rem;">50-60%</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #f6ad55;">
                            <td style="padding: 0.8rem; font-weight: bold;">Enclosure Size</td>
                            <td style="padding: 0.8rem;">90x45x45 cm (36x18x18 in) minimum</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #f6ad55;">
                            <td style="padding: 0.8rem; font-weight: bold;">Feeding Schedule</td>
                            <td style="padding: 0.8rem;">Every 7-10 days (adults)</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #f6ad55;">
                            <td style="padding: 0.8rem; font-weight: bold;">Substrate</td>
                            <td style="padding: 0.8rem;">Aspen, cypress mulch, or paper</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.8rem; font-weight: bold;">Care Level</td>
                            <td style="padding: 0.8rem;"><strong style="color: #38a169;">Beginner Friendly</strong></td>
                        </tr>
                    </table>
                </div>

                <!-- Genetics & Breeding -->
                <div class="genetics-section">
                    <h2>üß¨ Genetics & Breeding</h2>
                    <table style="width: 100%; border-collapse: collapse; background: white;">
                        <tr style="border-bottom: 1px solid #9ae6b4;">
                            <td style="padding: 0.8rem; font-weight: bold; width: 150px;">Inheritance</td>
                            <td style="padding: 0.8rem;">${morph.gene_type.toUpperCase()}</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #9ae6b4;">
                            <td style="padding: 0.8rem; font-weight: bold;">Description</td>
                            <td style="padding: 0.8rem;">${geneInfo.description || 'Standard inheritance pattern'}</td>
                        </tr>
                        ${morph.super_form ? `
                        <tr style="border-bottom: 1px solid #9ae6b4;">
                            <td style="padding: 0.8rem; font-weight: bold;">Super Form</td>
                            <td style="padding: 0.8rem;"><strong>${morph.super_form}</strong> (homozygous)</td>
                        </tr>
                        ` : ''}
                        <tr style="border-bottom: 1px solid #9ae6b4;">
                            <td style="padding: 0.8rem; font-weight: bold;">Breeding Age</td>
                            <td style="padding: 0.8rem;">3-4 years old minimum</td>
                        </tr>
                        <tr style="border-bottom: 1px solid #9ae6b4;">
                            <td style="padding: 0.8rem; font-weight: bold;">Clutch Size</td>
                            <td style="padding: 0.8rem;">4-10 eggs average</td>
                        </tr>
                        <tr>
                            <td style="padding: 0.8rem; font-weight: bold;">Incubation</td>
                            <td style="padding: 0.8rem;">55-60 days at 31¬∞C (88¬∞F)</td>
                        </tr>
                    </table>
                    ${morph.breeding_notes ? `
                        <div style="margin-top: 1rem; padding: 1rem; background: white; border-radius: 6px;">
                            <strong>‚ö†Ô∏è Breeding Notes:</strong><br>
                            ${morph.breeding_notes}
                        </div>
                    ` : ''}
                </div>

                <!-- Health & Risks -->
                ${morph.health_risk !== 'none' || healthIssues.length > 0 ? `
                    <div class="health-section">
                        <h2>‚öïÔ∏è Health & Safety</h2>
                        <table style="width: 100%; border-collapse: collapse; background: white;">
                            <tr style="border-bottom: 1px solid #fc8181;">
                                <td style="padding: 0.8rem; font-weight: bold; width: 150px;">Health Risk</td>
                                <td style="padding: 0.8rem;">
                                    <strong style="color: ${morph.health_risk === 'high' ? '#e53e3e' : morph.health_risk === 'moderate' ? '#dd6b20' : '#38a169'};">
                                        ${morph.health_risk.toUpperCase()}
                                    </strong>
                                </td>
                            </tr>
                            ${morph.health_issues?.length ? morph.health_issues.map(issue => `
                            <tr style="border-bottom: 1px solid #fc8181;">
                                <td style="padding: 0.8rem; font-weight: bold;">Issue</td>
                                <td style="padding: 0.8rem;">‚ö†Ô∏è ${issue}</td>
                            </tr>
                            `).join('') : ''}
                            <tr>
                                <td style="padding: 0.8rem; font-weight: bold;">Vet Checkups</td>
                                <td style="padding: 0.8rem;">Annual recommended</td>
                            </tr>
                        </table>
                    </div>
                ` : ''}


                <!-- Source -->
                <div style="margin-top: 2rem; padding: 1rem; background: #f7fafc; border-radius: 8px;">
                    <small style="color: #718096;">
                        <strong>Source:</strong> <a href="${morph.source_url}" target="_blank">${morph.source_url}</a><br>
                        <strong>Last Updated:</strong> ${morph.fetched_at}
                    </small>
                </div>
            `;
        };

        window.showGrid = function() {
            document.getElementById('grid-view').style.display = 'grid';
            document.getElementById('detail-view').classList.remove('active');
        };

        renderGrid();
        console.log(`‚úÖ Loaded ${allMorphs.length} ball python morphs!`);
    </script>
</body>
</html>
