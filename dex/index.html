<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üêç Snake Dex - Detailed Encyclopedia</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            background: #f5f7fa;
            color: #2d3748;
        }
        
        .dex-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        /* Grid View */
        .morphs-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .morph-thumb {
            background: white;
            border: 3px solid #e2e8f0;
            border-radius: 12px;
            padding: 1rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .morph-thumb:hover {
            border-color: #4299e1;
            transform: translateY(-4px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .morph-thumb img {
            width: 100px;
            height: 100px;
            object-fit: contain;
        }
        
        .morph-number {
            font-size: 0.8rem;
            color: #a0aec0;
            margin-bottom: 0.5rem;
        }
        
        .morph-name {
            font-weight: bold;
            font-size: 0.95rem;
            margin-top: 0.5rem;
        }
        
        /* Detailed View (like Pokemon DB) */
        .morph-detail {
            display: none;
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .morph-detail.active {
            display: block;
        }
        
        .detail-header {
            display: grid;
            grid-template-columns: 200px 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
            padding-bottom: 2rem;
            border-bottom: 2px solid #e2e8f0;
        }
        
        .detail-image img {
            width: 200px;
            height: 200px;
            object-fit: contain;
        }
        
        .detail-info h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }
        
        .detail-number {
            color: #a0aec0;
            font-size: 1.2rem;
            margin-bottom: 1rem;
        }
        
        .detail-badges {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .badge {
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: bold;
            text-transform: uppercase;
        }
        
        .badge-gene { background: #bee3f8; color: #2c5282; }
        .badge-rarity { background: #fbd38d; color: #7c2d12; }
        .badge-health { background: #fc8181; color: #742a2a; }
        
        /* Stats Table (like Pokemon DB) */
        .stats-section {
            margin: 2rem 0;
        }
        
        .stats-section h2 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #2d3748;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }
        
        .stat-box {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 1rem;
        }
        
        .stat-label {
            font-size: 0.85rem;
            color: #718096;
            margin-bottom: 0.3rem;
        }
        
        .stat-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #2d3748;
        }
        
        /* Genetics Section */
        .genetics-section {
            background: #f0fff4;
            border: 2px solid #9ae6b4;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        
        .genetics-title {
            font-size: 1.3rem;
            color: #22543d;
            margin-bottom: 1rem;
        }
        
        /* Health Risks */
        .health-section {
            background: #fff5f5;
            border: 2px solid #fc8181;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        
        .health-title {
            font-size: 1.3rem;
            color: #742a2a;
            margin-bottom: 1rem;
        }
        
        .health-issue {
            background: white;
            padding: 1rem;
            border-radius: 6px;
            margin-bottom: 0.5rem;
        }
        
        /* Breeding Section */
        .breeding-section {
            background: #fef5e7;
            border: 2px solid #f6ad55;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        
        .breeding-title {
            font-size: 1.3rem;
            color: #7c2d12;
            margin-bottom: 1rem;
        }
        
        /* Back button */
        .back-btn {
            padding: 0.8rem 1.5rem;
            background: #4299e1;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            margin-bottom: 1rem;
        }
        
        .back-btn:hover {
            background: #3182ce;
        }
    </style>
</head>
<body>
    <div class="dex-container">
        <h1 style="text-align: center; margin-bottom: 2rem; font-size: 2.5rem;">üêç Ball Python Dex</h1>
        
        <!-- Grid View -->
        <div id="grid-view" class="morphs-grid"></div>
        
        <!-- Detail View -->
        <div id="detail-view" class="morph-detail"></div>
    </div>

    <script type="module">
        // Load all genetics data
        const [morphsBase, morphsExpanded, geneTypes, healthRisks] = await Promise.all([
            fetch('../data/genetics/morphs.json').then(r => r.json()),
            fetch('../data/genetics/morphs-expanded.json').then(r => r.json()),
            fetch('../data/genetics/gene-types.json').then(r => r.json()),
            fetch('../data/genetics/health-risks.json').then(r => r.json())
        ]);
        
        const allMorphs = [...morphsBase.morphs, ...morphsExpanded.morphs].map((m, i) => ({
            ...m,
            index: i + 1
        }));

        // Render grid
        function renderGrid() {
            const grid = document.getElementById('grid-view');
            grid.innerHTML = allMorphs.map(morph => `
                <div class="morph-thumb" onclick="showDetail('${morph.id}')">
                    <div class="morph-number">#${String(morph.index).padStart(3, '0')}</div>
                    <div style="font-size: 4rem;">üêç</div>
                    <div class="morph-name">${morph.name}</div>
                </div>
            `).join('');
        }

        // Show detailed view (like Pokemon DB)
        window.showDetail = function(morphId) {
            const morph = allMorphs.find(m => m.id === morphId);
            if (!morph) return;

            const geneInfo = geneTypes.gene_types[morph.gene_type] || {};
            const healthIssues = healthRisks.documented_issues.filter(h => h.morph === morphId);

            document.getElementById('grid-view').style.display = 'none';
            const detailView = document.getElementById('detail-view');
            detailView.classList.add('active');
            
            detailView.innerHTML = `
                <button class="back-btn" onclick="showGrid()">‚Üê Back to Dex</button>
                
                <div class="detail-header">
                    <div class="detail-image">
                        <div style="font-size: 10rem; text-align: center;">üêç</div>
                    </div>
                    <div class="detail-info">
                        <div class="detail-number">National ‚Ññ ${String(morph.index).padStart(4, '0')}</div>
                        <h1>${morph.name}</h1>
                        <div class="detail-badges">
                            <span class="badge badge-gene">${morph.gene_type}</span>
                            <span class="badge badge-rarity">${morph.rarity}</span>
                            ${morph.health_risk !== 'none' ? `<span class="badge badge-health">‚ö†Ô∏è ${morph.health_risk} risk</span>` : ''}
                        </div>
                        ${morph.aliases?.length ? `<p><strong>Also known as:</strong> ${morph.aliases.join(', ')}</p>` : ''}
                    </div>
                </div>

                <!-- Dex Data -->
                <div class="stats-section">
                    <h2>Dex Data</h2>
                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-label">Species</div>
                            <div class="stat-value">Ball Python</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Scientific Name</div>
                            <div class="stat-value">Python regius</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Average Length</div>
                            <div class="stat-value">1.0-1.5 m</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Average Weight</div>
                            <div class="stat-value">1.2-1.8 kg</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Lifespan</div>
                            <div class="stat-value">20-30 years</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Market Value</div>
                            <div class="stat-value">$${morph.market_value_usd}</div>
                        </div>
                    </div>
                </div>

                <!-- Genetics -->
                <div class="genetics-section">
                    <h3 class="genetics-title">üß¨ Genetics & Breeding</h3>
                    <div class="stat-box" style="margin-bottom: 1rem;">
                        <div class="stat-label">Gene Type</div>
                        <div class="stat-value">${morph.gene_type.toUpperCase()}</div>
                        <p style="margin-top: 0.5rem; color: #4a5568;">${geneInfo.description || 'Genetic inheritance pattern'}</p>
                    </div>
                    
                    ${morph.super_form ? `
                        <div class="stat-box" style="margin-bottom: 1rem;">
                            <div class="stat-label">Super Form</div>
                            <div class="stat-value">${morph.super_form}</div>
                            <p style="margin-top: 0.5rem; color: #4a5568;">When two copies of this gene are present</p>
                        </div>
                    ` : ''}
                    
                    ${morph.breeding_notes ? `
                        <div class="stat-box">
                            <div class="stat-label">Breeding Notes</div>
                            <p style="margin-top: 0.5rem; color: #4a5568;">${morph.breeding_notes}</p>
                        </div>
                    ` : ''}
                </div>

                <!-- Health & Care -->
                ${morph.health_risk !== 'none' || healthIssues.length > 0 ? `
                    <div class="health-section">
                        <h3 class="health-title">‚öïÔ∏è Health & Care Requirements</h3>
                        <div class="stat-box" style="margin-bottom: 1rem;">
                            <div class="stat-label">Health Risk Level</div>
                            <div class="stat-value" style="color: ${morph.health_risk === 'high' ? '#e53e3e' : '#48bb78'};">${morph.health_risk.toUpperCase()}</div>
                        </div>
                        
                        ${morph.health_issues?.length ? `
                            <div>
                                <strong>Known Issues:</strong>
                                ${morph.health_issues.map(issue => `
                                    <div class="health-issue">
                                        ‚ö†Ô∏è ${issue}
                                    </div>
                                `).join('')}
                            </div>
                        ` : ''}
                    </div>
                ` : ''}

                <!-- Care Requirements -->
                <div class="breeding-section">
                    <h3 class="breeding-title">üå°Ô∏è Care Requirements</h3>
                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-label">Temperature (Day)</div>
                            <div class="stat-value">28-32¬∞C</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Temperature (Night)</div>
                            <div class="stat-value">24-26¬∞C</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Humidity</div>
                            <div class="stat-value">50-60%</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Enclosure Size</div>
                            <div class="stat-value">90x45x45 cm min</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Feeding</div>
                            <div class="stat-value">Every 7-10 days</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Care Level</div>
                            <div class="stat-value">Beginner</div>
                        </div>
                    </div>
                </div>

                <!-- Source -->
                <div style="margin-top: 2rem; padding: 1rem; background: #f7fafc; border-radius: 8px;">
                    <small style="color: #718096;">
                        <strong>Source:</strong> <a href="${morph.source_url}" target="_blank">${morph.source_url}</a><br>
                        <strong>Last Updated:</strong> ${morph.fetched_at}
                    </small>
                </div>
            `;
        };

        window.showGrid = function() {
            document.getElementById('grid-view').style.display = 'grid';
            document.getElementById('detail-view').classList.remove('active');
        };

        renderGrid();
        console.log(`‚úÖ Loaded ${allMorphs.length} ball python morphs!`);
    </script>
</body>
</html>
