<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üõ†Ô∏è Developer Dashboard - Serpent Town</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
      min-height: 100vh;
      padding: 20px;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    h1 {
      color: white;
      text-align: center;
      margin-bottom: 30px;
      font-size: 2.5rem;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    .card {
      background: white;
      border-radius: 12px;
      padding: 25px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
      transition: transform 0.3s, box-shadow 0.3s;
      cursor: pointer;
      text-decoration: none;
      color: inherit;
      display: block;
    }
    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 30px rgba(0,0,0,0.3);
    }
    .card-icon {
      font-size: 3rem;
      margin-bottom: 15px;
      text-align: center;
    }
    .card-title {
      font-size: 1.5rem;
      font-weight: bold;
      margin-bottom: 10px;
      color: #2a5298;
    }
    .card-desc {
      color: #666;
      line-height: 1.6;
    }
    .section {
      background: white;
      border-radius: 12px;
      padding: 25px;
      margin-bottom: 20px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    }
    .section h2 {
      color: #2a5298;
      margin-bottom: 15px;
      border-bottom: 2px solid #eee;
      padding-bottom: 10px;
    }
    .command {
      background: #1e1e1e;
      color: #0f0;
      padding: 15px;
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      margin: 10px 0;
      overflow-x: auto;
      font-size: 14px;
    }
    .badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: bold;
      margin-left: 10px;
    }
    .badge-danger { background: #ff6b6b; color: white; }
    .badge-warning { background: #ffa500; color: white; }
    .badge-info { background: #4dabf7; color: white; }
    .badge-success { background: #51cf66; color: white; }
    ul { margin-left: 20px; line-height: 2; }
    a.btn {
      display: inline-block;
      background: #2a5298;
      color: white;
      padding: 10px 20px;
      border-radius: 8px;
      text-decoration: none;
      margin: 5px;
      transition: background 0.3s;
    }
    a.btn:hover { background: #1e3c72; }
  </style>
</head>
<body>
  <div class="container">
    <h1>üõ†Ô∏è Developer Dashboard</h1>

    <!-- Quick Access Cards -->
    <div class="grid">
      <a href="debug-test.html" class="card">
        <div class="card-icon">üîç</div>
        <div class="card-title">Debug Console</div>
        <div class="card-desc">
          Test game controller loading, data files, worker API, and event listeners
        </div>
      </a>

      <a href="cleanup.html" class="card">
        <div class="card-icon">üßπ</div>
        <div class="card-title">Data Cleanup</div>
        <div class="card-desc">
          Clear browser localStorage and reset game state for fresh testing
        </div>
      </a>

      <a href="start.html" class="card">
        <div class="card-icon">üéÆ</div>
        <div class="card-title">Quick Start</div>
        <div class="card-desc">
          Demo mode with 3 free snakes, or manual hash entry for testing
        </div>
      </a>

      <a href="game.html" class="card">
        <div class="card-icon">üêç</div>
        <div class="card-title">Game</div>
        <div class="card-desc">
          Main Tamagotchi-style snake care game
        </div>
      </a>

      <a href="catalog.html" class="card">
        <div class="card-icon">üõí</div>
        <div class="card-title">Catalog</div>
        <div class="card-desc">
          Shop with Stripe integration and sold status tracking
        </div>
      </a>

      <a href="index.html" class="card">
        <div class="card-icon">üè†</div>
        <div class="card-title">Landing Page</div>
        <div class="card-desc">
          Public-facing homepage
        </div>
      </a>
    </div>

    <!-- Server Commands -->
    <div class="section">
      <h2>üñ•Ô∏è Server Commands <span class="badge badge-info">LOCAL</span></h2>
      
      <h3>Check server status:</h3>
      <div class="command">bash .github/skills/check-server-status.sh</div>
      
      <h3>Python HTTP server (port 8000):</h3>
      <div class="command">python -m http.server 8000</div>
      
      <p style="margin-top: 15px; color: #666;">
        ‚ö†Ô∏è AI assistants should NOT start/stop servers manually!
      </p>
    </div>

    <!-- Cloudflare Worker -->
    <div class="section">
      <h2>‚òÅÔ∏è Cloudflare Worker <span class="badge badge-warning">PRODUCTION</span></h2>
      
      <h3>Deploy worker:</h3>
      <div class="command">cd worker && npx wrangler publish worker.js</div>
      
      <h3>Test worker endpoints:</h3>
      <div class="command">bash .github/skills/test-worker.sh</div>
      
      <h3>View worker logs:</h3>
      <div class="command">cd worker && npx wrangler tail</div>
      
      <h3>Current worker URL:</h3>
      <div class="command">https://catalog.navickaszilvinas.workers.dev</div>
    </div>

    <!-- KV Storage -->
    <div class="section">
      <h2>üíæ Cloudflare KV Storage <span class="badge badge-danger">DESTRUCTIVE</span></h2>
      
      <h3>List all keys (USER_PRODUCTS):</h3>
      <div class="command">npx wrangler kv:key list --namespace-id=3b88d32c0a0540a8b557c5fb698ff61a</div>
      
      <h3>Get specific user data:</h3>
      <div class="command">npx wrangler kv:key get "user:USER_HASH" --namespace-id=3b88d32c0a0540a8b557c5fb698ff61a</div>
      
      <h3>Delete specific user:</h3>
      <div class="command">npx wrangler kv:key delete "user:USER_HASH" --namespace-id=3b88d32c0a0540a8b557c5fb698ff61a</div>
      
      <h3>Delete all keys (NUCLEAR):</h3>
      <div class="command">bash scripts/clean-kv.sh</div>
      
      <h3>Create PRODUCT_STATUS namespace:</h3>
      <div class="command">cd worker && bash create-product-status-kv.sh</div>
    </div>

    <!-- Testing -->
    <div class="section">
      <h2>üß™ Testing <span class="badge badge-success">SAFE</span></h2>
      
      <h3>Run all tests (86 tests):</h3>
      <div class="command">npm test</div>
      
      <h3>Unit tests only:</h3>
      <div class="command">npm run test:unit</div>
      
      <h3>Snapshot tests:</h3>
      <div class="command">npm run test:snapshot</div>
      
      <h3>Test product conversion:</h3>
      <div class="command">node test-product-conversion.js</div>
    </div>

    <!-- Git Commands -->
    <div class="section">
      <h2>üì¶ Git <span class="badge badge-info">VERSION CONTROL</span></h2>
      
      <h3>Check status:</h3>
      <div class="command">git status</div>
      
      <h3>Commit changes:</h3>
      <div class="command">git add -A && git commit -m "Your message"</div>
      
      <h3>Push to GitHub:</h3>
      <div class="command">git push origin main</div>
      
      <h3>View recent commits:</h3>
      <div class="command">git log --oneline -10</div>
    </div>

    <!-- API Endpoints -->
    <div class="section">
      <h2>üåê API Endpoints</h2>
      <ul>
        <li><strong>POST /stripe-webhook</strong> - Stripe payment webhook</li>
        <li><strong>GET /user-products?user=HASH</strong> - Get user's snakes</li>
        <li><strong>GET /product-status?id=PRODUCT_ID</strong> - Check if sold</li>
        <li><strong>GET /user-data?user=HASH</strong> - Get user profile</li>
        <li><strong>POST /register-user</strong> - Save user data after purchase</li>
        <li><strong>POST /assign-product</strong> - Manual assignment (testing)</li>
      </ul>
    </div>

    <!-- Architecture Overview -->
    <div class="section">
      <h2>üèóÔ∏è Architecture Overview</h2>
      
      <h3>Data Flow:</h3>
      <ul>
        <li><strong>data/products.json</strong> - Catalog of available snakes (static)</li>
        <li><strong>Cloudflare KV (USER_PRODUCTS)</strong> - User-purchased snakes by hash</li>
        <li><strong>Cloudflare KV (PRODUCT_STATUS)</strong> - Sold status for unique real snakes</li>
        <li><strong>Browser localStorage</strong> - Game state (stats, settings) only</li>
      </ul>
      
      <h3>Purchase Flow:</h3>
      <ol style="line-height: 2;">
        <li>User clicks "Buy Now" in catalog.html</li>
        <li>Stripe Checkout (user hash in client_reference_id)</li>
        <li>Payment complete ‚Üí Stripe webhook ‚Üí Worker</li>
        <li>Worker writes to USER_PRODUCTS + PRODUCT_STATUS KV</li>
        <li>Game loads from worker API</li>
      </ol>
    </div>

    <!-- Quick Links -->
    <div class="section">
      <h2>üîó Quick Links</h2>
      <a href="README.md" class="btn">üìö README</a>
      <a href="docs/v0.1.0.md" class="btn">üìñ Technical Docs</a>
      <a href="SETUP.md" class="btn">‚öôÔ∏è Setup Guide</a>
      <a href="CLOUDFLARE-SETUP-COMPLETE.md" class="btn">‚òÅÔ∏è Cloudflare Setup</a>
      <a href="CHANGES_SUMMARY.md" class="btn">üìù Changes Log</a>
    </div>

    <p style="text-align: center; color: white; margin-top: 30px; opacity: 0.8;">
      Serpent Town v0.1.0 | Developer Dashboard
    </p>
  </div>
</body>
</html>
